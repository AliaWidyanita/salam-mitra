<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <object th:insert="~{fragments/common :: fragment}" th:remove="tag"></object>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <style>
        .program-detail-container {
            display: flex;
            align-items: flex-start;
            flex-wrap: wrap;
            position: relative;
        }

        .program-detail-container .program-image {
            flex: 1;
            max-width: 40%;
            margin-right: 20px;
        }

        .program-detail-container .program-image img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 15px; /* Membuat sudut gambar lengkung */
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2); /* Efek border halus */
        }

        .program-info {
            flex: 1;
            max-width: 60%; /* Lebar maksimum info program */
        }

        .program-info p {
            margin: 0;
        }

        .program-description {
            margin-top: 30px;
            text-align: left;
            max-width: 100%; 
            overflow-wrap: break-word;
        }

        .iterate-item {
            display: inline-block;
            margin-right: 10px;
            margin-bottom: 5px;
            padding: 5px 10px;
            background-color: #f0f0f0;
            border-radius: 10px;
        }

        .column {
            float: left;
            width: 50%;
        }

        .row::after {
            content: "";
            clear: both;
            display: table;
        }

        .close {
            color: rgb(144, 144, 144);
            float: left;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        /* Style untuk pesan program dihapus */
        .program-deleted-message {
            text-align: center;
            margin-top: 50px;
        }
        
        /* Style untuk tombol delete */
        .delete-button {
            top: 10px;
            left: 10px;
            margin-left: 10px;
            background-color: #f23d3d;
            color: #fff;
            border: none;
            border-radius: 5px;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .edit-button {
            background-color: #23bbf2;
            color: #fff;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            margin-left: auto;
        }

        .edit-button:hover {
            background-color: #0da4db;
            color: #fff;
            transition: background-color 0.3s ease;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .button-row-modal {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .back-button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 28px;
            color: #666;
        }

        .back-button:hover  {
            color: black;
        }

        /* Style for pop-up container */
        .popup {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black background */
            z-index: 9999;
            overflow-y: auto;
        }

        /* Style for pop-up content */
        .popup-content {
            background-color: white;
            margin: 200px auto;
            padding: 20px;
            width: 60%;
            border-radius: 10px;
        }

        /* Style for close button */
        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

    </style>
</head>
<body>
    <div th:replace="~{fragments/navbar :: header(page='program')}"></div>
    <div class="container">
        <div class="container-fluid" style="padding-bottom: 5%; padding-top: 15%;">
            <div class="container" data-aos="fade-up">
                <div class="row d-flex justify-content-center">
                    <div class="container" th:if="${program.isDeleted}">
                        <div class="program-deleted-message">
                            <h4 style="color: #f23d3d;">Halaman tidak tersedia karena program ini sudah dihapus!</h4>
                        </div>
                    </div>
                    <div class="container" th:unless="${program.isDeleted}">
                        
                        <div class="button-container">
                            <!-- Button kembali -->
                            <a href="/program">
                                <i class="bi bi-arrow-left back-button"></i>
                            </a>

                            <th:block th:if="${role == 'admin_PROGRAM'}">
                                    <a th:href="@{'/edit-program-' + ${program.id}}" class="edit-button">Edit Program</a>
                                <!-- Button to trigger delete modal -->
                                <button onclick="showDeleteModal()" class="delete-button">
                                    <i class="bi bi-trash"></i>
                            </button>
                            </th:block>
                        </div>

                        <div class="row program-detail-container">

                            <div class="col-md-6 program-image">
                                <!-- Foto program -->
                                <img th:if="${program.fotoProgram == null}" src="/assets/img/placeholder-program.png" alt="Placeholder" class="img-fluid">
                                <img th:unless="${program.fotoProgram == null}" th:src="'data:image/jpeg;base64,' + ${program.imageBase64}" alt="Foto Program" class="img-fluid">
                            </div>                            
                              
                            <div class="col-md-6 program-info">

                                <!-- Informasi program -->
                                <div class="program-title">
                                    <h3 th:text="${program.judul}" class="mb-4"></h3>
                                    
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <p style="font-weight: bold;">Kategori Program</p>
                                    <div style="margin-left: 10px;">
                                        <span th:text="${program.kategoriProgram}" class="iterate-item"></span>
                                    </div>
                                </p>
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <p style="font-weight: bold;">Kategori Asnaf <sup><i class="bi bi-info-circle" style="margin-left: 2px; font-size: 13px; cursor: pointer; color: #f28123;" onclick="showInfoPopup()"></i></sup></p>
                                    <div style="margin-left: 10px;">
                                        <span th:each="kategoriAsnaf : ${program.kategoriAsnaf}" class="iterate-item"  th:text="${kategoriAsnaf}"></span>
                                    </div>
                                </div>
                                <p style="font-weight: bold;">Provinsi</p>
                                <div class="row">
                                    <div class="column">
                                        <ul>
                                            <li th:each="provinsi,iterStat : ${program.provinsi}" th:if="${iterStat.index % 2 == 0}" th:text="${provinsi}"></li>
                                        </ul>
                                    </div>
                                    <div class="column">
                                        <ul>
                                            <li th:each="provinsi,iterStat : ${program.provinsi}" th:if="${iterStat.index % 2 != 0}" th:text="${provinsi}"></li>
                                        </ul>
                                    </div>
                                </div>
                                <div th:if="${not #lists.isEmpty(program.kabupatenKota)}">
                                    <p style="font-weight: bold;">Kabupaten/Kota</p>
                                    <div class="row">
                                        <div class="column">
                                            <ul>
                                                <li th:each="kabupatenKota,iterStat : ${program.kabupatenKota}" th:if="${iterStat.index % 2 == 0}" th:text="${kabupatenKota}"></li>
                                            </ul>
                                        </div>
                                        <div class="column">
                                            <ul>
                                                <li th:each="kabupatenKota,iterStat : ${program.kabupatenKota}" th:if="${iterStat.index % 2 != 0}" th:text="${kabupatenKota}"></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 program-description">
                                <h5>Deskripsi Program</h5>
                                <p th:text="${program.deskripsi}"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal konfirmasi penghapusan -->
    <div id="deleteModal" class="popup">
        <div class="popup-content" style="height: 250px;">
            <span class="close" onclick="closeDeleteModal()">&times;</span>
            <h5 style="text-align: center; margin-top: 50px; margin-bottom: 50px;">Apakah Anda yakin ingin menghapus program ini?</h5>
            <!-- Tombol untuk mengonfirmasi penghapusan -->
            <form id="deleteForm" th:action="@{/hapus-program-{id}(id=${program.id})}" method="post">
                <div style="display: flex;">
                    <button type="button" onclick="closeDeleteModal()" style="margin-right: 15px; font-weight: bold; background-color: #a9a9a9; color: #fff; border: none; border-radius: 25px; padding: 10px 20px; cursor: pointer; transition: background-color 0.3s ease;" onmouseover="this.style.backgroundColor='#828282'" onmouseout="this.style.backgroundColor='#a9a9a9'">Batal</button>
                    <button style="margin-left: 15px; text-transform: none; background-color: #f23d3d; color: #fff; border: none; padding: 10px 20px; cursor: pointer; transition: background-color 0.3s ease;" onmouseover="this.style.backgroundColor='#d32f2f'" onmouseout="this.style.backgroundColor='#f23d3d'" type="submit">Hapus</button>
                </div>
            </form>
        </div>
    </div>


    <div id="infoPopup" class="popup">
        <div class="popup-content" style="padding: 30px;">
            <span class="close" onclick="closeInfoPopup()">&times;</span>
            <h5>Penjelasan Kategori Asnaf</h5>
            
            <h6>A. Fakir</h6>
                <div style="margin: 20px;">
                    <p>
                        Merupakan orang yang sama sekali tidak mempunyai sumber mata penghasilan untuk memenuhi kebutuhan dasar.
                        <ul>
                            <li>Lansia yang tidak bisa bekerja</li>
                            <li>Anak yang belum baligh</li>
                            <li>Orang yang sakit atau cacat fisik/mental</li>
                            <li>Orang yang berjuang di jalan Allah tanpa menerima bayaran</li>
                            <li>Korban bencana alam dan/atau bencana sosial baik muslim maupun non-muslim</li>
                        </ul>
                    </p>
                </div>

            <h6>B. Miskin</h6>
                <div style="margin: 20px;">
                    <p>
                        Merupakan orang yang mempunyai sumber mata pencaharian tetapi tidak mempunya kemampuan kebutuhan dasar yang layak bagi 
                        kehidupan dirinya dan atau keluarga yang menjadi tanggungannya.
                        <ul>
                            <li>Orang yang tidak/kurang memiliki pengetahuan dan keterampilan</li>
                            <li>Orang yang tidak/kurang memiliki modal usaha</li>
                            <li>Orang yang tidak/kurang memiliki akses terhadap pasar</li>
                            <li>Orang yang tidak/kurang memiliki akses terhadap fasilitas pendidikan dan kesehatan</li>
                            <li>Orang yang tidak/kurang memiliki akses untuk beribadah</li>
                        </ul>
                    </p>
                </div>
            
            <h6>C. Amil</h6>
                <div style="margin: 20px;">
                    <p>
                        Merupakan seseorang atau sekelompok orang yang diangkat dan atau diberi kewenangan oleh pemerintah, 
                        pemerindah daerab, badan, lembaga yang diberikan izin oleh pemerintah dan atau pemerintah daerah dan/atau 
                        seseorang yang mendapat mandat dari pimpinan Pengelola Zakat untuk mengelola zakat.
                        <ul>
                            <li>Petugas amil zakat</li>
                        </ul>
                    </p>
                </div>

            <h6>D. Mualaf</h6>
                <div style="margin: 20px;">
                    <p>
                        Merupakan orang yang sedang dikuatkan keyakinannya karena baru masuk Islam.
                        <ul>
                            <li>Orang yang baru masuk Islam</li>
                            <li>Orang yang rentan permutadan</li>
                            <li>Orang non-muslim yang tertarik mempelajari agama Islam</li>
                        </ul>
                    </p>
                </div>

            <h6>E. Riqab</h6>
                <div style="margin: 20px;">
                    <p>
                        Merupakan orang yang kehilangan kemerdekaannya atau tersandera kebebasannya yang menyebabkan
                        tidak bisa beribadah dan atau bermuamalah.
                        <ul>
                            <li>Orang yang menjadi korban perdagangan manusia</li>
                            <li> Orang yang ditahan oleh musuh Islam</li>
                            <li>Orang yang terjajah dan atau teraniaya</li>
                        </ul>
                    </p>
                </div>
            
            <h6>F. Gharimin</h6>
                <div style="margin: 20px;">
                    <p>Merupakan orang yang berhutang untuk melaksanakan maslahat dan atau menghindari mudarat sesuai dengan syariat Islam                        
                        <ul>
                            <li>Orang yang berhutang untuk kemaslahatan diri dan keluarga secara tidak berlebihan seperti untuk nafkah, mengobati orang sakit, membangun rumah dan lain sebagainya</li>
                            <li>Orang yang berhutang untuk kemaslahatan umum seperti biaya mendamaikan dua orang muslim atau lebih yang beselisih</li>
                            <li>Orang yang berhutang untuk kemaslahatan umum lainnya, seperti membangun sarana ibadah</li>
                        </ul>
                    </p>
                </div>

            <h6>G. Fi Sabilillah</h6>
                <div style="margin: 20px;">
                    <p>
                        Merupakan orang yang sedang berjuang menegakkan syariat Islam, mengupayaka kemaslahatan dan
                        atau menjauhkan umat Islam dari kemudharatan.
                        <ul>
                            <li>Orang atau kelompok/lembaga yang sedang berjuang menegakkan kalimat Allah SWT</li>
                            <li>Orang yang secara ikhlas melaksanakan tuntutan agama baik tntutan wajib, sunnah, dan berbagai kebaikan lainnya dalam rangka mendekatkan diri kepada Allah SWT</li>
                            <li>Orang atau kelompok/lembaga yang secara ikhlas dan bersungguh-sungguh dalam menuntut ilmu yang bermanfaat bagi umat</li>
                            <li>Orang atau kelompok/lembaga yang sedang berjuang memperbaiki kondisi kemaslahatan bangsa dan umat Islam</li>
                        </ul>
                    </p>
                </div>

            <h6>H. Ibnu Sabil</h6>
                <div style="margin: 20px;">
                    <p>
                        Merupakan orang yang kehabisan biaya atau bekal dalam melakukan perjalanan dalam rangka melakukan sesuatu yang baik
                        <ul>
                            <li>Orang yang terlantar di perjalanan</li>
                            <li> Orang asing (pengungsi) beragama Islam yang terlantar di wilayah NKRI akibat perang, genosida dan bencana sosial yang terjadi di negara asalnya</li>
                        </ul>
                    </p>
                </div>
        </div>
    </div>

    <!-- Script untuk modal konfirmasi -->
    <script>
        var deleteModal = document.getElementById("deleteModal");

        function showDeleteModal() {
            deleteModal.style.display = "block";
        }

        function closeDeleteModal() {
            deleteModal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == deleteModal) {
                closeDeleteModal();
            } 
        }

        var infoPopup = document.getElementById("infoPopup");

        function showInfoPopup() {
            infoPopup.style.display = "block";
        }

        function closeInfoPopup() {
            infoPopup.style.display = "none";
        }

        window.onclick = function(event) {
        if (event.target == infoPopup) {
            closeInfoPopup();
        } 
    }

    </script>

    <!-- jquery -->
    <script src="assets/js/jquery-1.11.3.min.js"></script>
    <!-- bootstrap -->
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <!-- count down -->
    <script src="assets/js/jquery.countdown.js"></script>
    <!-- isotope -->
    <script src="assets/js/jquery.isotope-3.0.6.min.js"></script>
    <!-- waypoints -->
    <script src="assets/js/waypoints.js"></script>
    <!-- owl carousel -->
    <script src="assets/js/owl.carousel.min.js"></script>
    <!-- magnific popup -->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!-- mean menu -->
    <script src="assets/js/jquery.meanmenu.min.js"></script>
    <!-- sticker js -->
    <script src="assets/js/sticker.js"></script>
    <!-- main js -->
    <script src="assets/js/main.js"></script>
</body>
</html>