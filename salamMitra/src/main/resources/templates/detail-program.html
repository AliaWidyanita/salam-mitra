<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <object th:insert="~{fragments/common :: fragment}" th:remove="tag"></object>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <style>
        .program-detail-container {
            display: flex;
            align-items: flex-start;
            flex-wrap: wrap;
            position: relative;
        }

        .program-detail-container .program-image {
            flex: 1;
            max-width: 40%;
            margin-right: 20px;
        }

        .program-detail-container .program-image img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 15px; /* Membuat sudut gambar lengkung */
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2); /* Efek border halus */
        }

        .program-info {
            flex: 1;
            max-width: 60%; /* Lebar maksimum info program */
        }

        .program-info p {
            margin: 0;
        }

        .program-description {
            margin-top: 30px;
            text-align: left;
            max-width: 100%; 
            overflow-wrap: break-word;
        }

        .iterate-item {
            display: inline-block;
            margin-right: 10px;
            margin-bottom: 5px;
            padding: 5px 10px;
            background-color: #f0f0f0;
            border-radius: 10px;
        }

        .column {
            float: left;
            width: 50%;
        }

        .row::after {
            content: "";
            clear: both;
            display: table;
        }

        /* Style untuk modal konfirmasi */
        #deleteModal {
            display: none;
            position: fixed;
            z-index: 1;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 50%;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
            text-align: end;
        }

        .close {
            color: rgb(144, 144, 144);
            float: left;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-content p {
            padding: 10px 0;
            text-align: center;
            font-size: 20px;
        }

        .modal-content button {
            margin: 5px;
            padding: 10px 20px;
            border-radius: 10px; 
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .modal-content button:hover {
            background-color: #9c9c9c;
            color: #fff;
        }

        .modal-content button:first-child {
            background-color: #9c9c9c; /* Warna abu tua */
            color: #fff;
        }

        .modal-content button:last-child {
            background-color: #f23d3d;
            color: #fff;
        }

        /* Style untuk pesan program dihapus */
        .program-deleted-message {
            text-align: center;
            margin-top: 50px;
        }
        
        /* Style untuk tombol delete */
        .delete-button {
            top: 10px;
            left: 10px;
            margin-left: 10px;
            background-color: #f23d3d;
            color: #fff;
            border: none;
            border-radius: 10px;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .delete-button:hover {
            background-color: rgb(219, 54, 54);
        }

        .edit-button {
            background-color: #23bbf2;
            color: #fff;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            margin-left: auto;
        }

        .edit-button:hover {
            background-color: #0da4db;
            color: #fff;
            transition: background-color 0.3s ease;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .button-row-modal {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .back-button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 28px;
            color: #666;
        }

        .back-button:hover  {
            color: black;
        }

    </style>
</head>
<body>
    <div th:replace="~{fragments/navbar :: header(page='program')}"></div>
    <div class="container">
        <div class="container-fluid" style="padding-bottom: 5%; padding-top: 15%;">
            <div class="container" data-aos="fade-up">
                <div class="row d-flex justify-content-center">
                    <div class="container" th:if="${program.isDeleted}">
                        <div class="program-deleted-message">
                            <h4 style="color: #f23d3d;">Halaman tidak tersedia karena program ini sudah dihapus!</h4>
                        </div>
                    </div>
                    <div class="container" th:unless="${program.isDeleted}">
                        
                        <div class="button-container">
                            <!-- Button kembali -->
                            <a href="/program">
                                <i class="bi bi-arrow-left back-button"></i>
                            </a>

                            <th:block th:if="${role == 'admin_PROGRAM'}">
                                    <a th:href="@{'/edit-program-' + ${program.id}}" class="edit-button">Edit Program</a>
                                <!-- Button to trigger delete modal -->
                                <button onclick="showDeleteModal()" class="delete-button">
                                    <i class="bi bi-trash"></i>
                            </button>
                            </th:block>
                        </div>

                        <div class="row program-detail-container">

                            <div class="col-md-6 program-image">
                                <!-- Foto program -->
                                <img th:if="${program.fotoProgram == null}" src="/assets/img/placeholder-program.png" alt="Placeholder" class="img-fluid">
                                <img th:unless="${program.fotoProgram == null}" th:src="'data:image/jpeg;base64,' + ${program.imageBase64}" alt="Foto Program" class="img-fluid">
                            </div>                            
                              
                            <div class="col-md-6 program-info">

                                <!-- Informasi program -->
                                <div class="program-title">
                                    <h3 th:text="${program.judul}" class="mb-4"></h3>
                                    
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <p style="font-weight: bold;">Kategori Program</p>
                                    <div style="margin-left: 10px;">
                                        <span th:text="${program.kategoriProgram}" class="iterate-item"></span>
                                    </div>
                                </p>
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <p style="font-weight: bold;">Kategori Asnaf</p>
                                    <div style="margin-left: 10px;">
                                        <span th:each="kategoriAsnaf : ${program.kategoriAsnaf}" class="iterate-item"  th:text="${kategoriAsnaf}"></span>
                                    </div>
                                </div>
                                <p style="font-weight: bold;">Provinsi</p>
                                <div class="row">
                                    <div class="column">
                                        <ul>
                                            <li th:each="provinsi,iterStat : ${program.provinsi}" th:if="${iterStat.index % 2 == 0}" th:text="${provinsi}"></li>
                                        </ul>
                                    </div>
                                    <div class="column">
                                        <ul>
                                            <li th:each="provinsi,iterStat : ${program.provinsi}" th:if="${iterStat.index % 2 != 0}" th:text="${provinsi}"></li>
                                        </ul>
                                    </div>
                                </div>
                                <div th:if="${not #lists.isEmpty(program.kabupatenKota)}">
                                    <p style="font-weight: bold;">Kabupaten/Kota</p>
                                    <div class="row">
                                        <div class="column">
                                            <ul>
                                                <li th:each="kabupatenKota,iterStat : ${program.kabupatenKota}" th:if="${iterStat.index % 2 == 0}" th:text="${kabupatenKota}"></li>
                                            </ul>
                                        </div>
                                        <div class="column">
                                            <ul>
                                                <li th:each="kabupatenKota,iterStat : ${program.kabupatenKota}" th:if="${iterStat.index % 2 != 0}" th:text="${kabupatenKota}"></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 program-description">
                                <h5>Deskripsi Program</h5>
                                <p th:text="${program.deskripsi}"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal konfirmasi penghapusan -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeDeleteModal()">&times;</span>
            <p>Apakah Anda yakin ingin menghapus program ini?</p>
            <div class="button-row-modal">
                <!-- Tombol untuk membatalkan penghapusan -->
                <button onclick="closeDeleteModal()">Batal</button>
                <!-- Tombol untuk mengonfirmasi penghapusan -->
                <form id="deleteForm" th:action="@{/hapus-program-{id}(id=${program.id})}" method="post">
                    <button type="submit">Hapus</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Script untuk modal konfirmasi -->
    <script>
        var deleteModal = document.getElementById("deleteModal");

        function showDeleteModal() {
            deleteModal.style.display = "block";
        }

        function closeDeleteModal() {
            deleteModal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == deleteModal) {
                closeDeleteModal();
            }
        }
    </script>

    <!-- jquery -->
    <script src="assets/js/jquery-1.11.3.min.js"></script>
    <!-- bootstrap -->
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <!-- count down -->
    <script src="assets/js/jquery.countdown.js"></script>
    <!-- isotope -->
    <script src="assets/js/jquery.isotope-3.0.6.min.js"></script>
    <!-- waypoints -->
    <script src="assets/js/waypoints.js"></script>
    <!-- owl carousel -->
    <script src="assets/js/owl.carousel.min.js"></script>
    <!-- magnific popup -->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!-- mean menu -->
    <script src="assets/js/jquery.meanmenu.min.js"></script>
    <!-- sticker js -->
    <script src="assets/js/sticker.js"></script>
    <!-- main js -->
    <script src="assets/js/main.js"></script>
</body>
</html>