<!DOCTYPE html>
<html
  lang="en"
  class="light-style layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="../assets/"
  data-template="vertical-menu-template-free"
>
  <head>
    <meta charset="UTF-8" />
    <object
      th:include="~{fragments/common :: fragment}"
      th:remove="tag"
    ></object>
    <title>Tambah Admin | Salam Mitra</title>
  </head>

  <body>
    <div class="layout-wrapper layout-content-navbar layout-without-menu">
      <div class="layout-container">
        <div class="layout-page">
          <nav th:replace="~{fragments/navbar :: navbar('pencairan')}"></nav>
          <div class="content-wrapper">
            <div class="container-xxl flex-grow-1 container-p-y">
              <div
                class="text-center"
                style="padding-top: 3%; padding-bottom: 3%"
              >
                <h1 class="display-3">
                  <strong> Tambah Admin </strong>
                </h1>
              </div>

              <div class="card">
                <div class="card-body">
                  <form
                    th:action="@{/pengguna-tambah-admin}"
                    th:object="${adminDTO}"
                    method="POST"
                  >
                    <div class="mb-3">
                      <label for="validationDefault01" class="form-label"
                        >Username*</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        th:field="*{username}"
                        required
                      />
                    </div>

                    <div class="mb-3">
                      <label for="validationDefault01" class="form-label"
                        >Email*</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="emailInput"
                        th:field="*{email}"
                        required
                      />
                      <div
                        id="email-error"
                        class="text-danger"
                        style="display: none"
                      >
                        Masukkan alamat email yang valid
                      </div>
                    </div>

                    <div class="mb-3">
                      <label for="validationDefault01" class="form-label"
                        >Kata Sandi*</label
                      >
                      <div class="input-group">
                        <input
                          type="password"
                          class="form-control"
                          name="password"
                          id="password"
                          th:field="*{password}"
                          required
                        />
                        <span class="input-group-text" id="inputGroupPrepend2"
                          ><i class="bx bx-hide" id="togglePassword"></i
                        ></span>
                      </div>
                      <div
                        id="password-error"
                        class="text-danger"
                        style="display: none"
                      ></div>
                    </div>

                    <div class="mb-3">
                      <label for="validationDefault01" class="form-label"
                        >Name Lengkap*</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        th:field="*{fullName}"
                        required
                      />
                    </div>

                    <div class="mb-3">
                      <label for="validationDefault01" class="form-label"
                        >Alamat*</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        th:field="*{address}"
                        required
                      />
                    </div>

                    <div class="mb-3">
                      <label for="validationDefault04" class="form-label"
                        >Jenis Kelamin*</label
                      >
                      <br />
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          value="Pria"
                          th:field="*{gender}"
                          id="defaultCheck2"
                        />
                        <label class="form-check-label" for="defaultCheck2">
                          Pria
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          value="Wanita"
                          th:field="*{gender}"
                          id="defaultCheck2"
                        />
                        <label class="form-check-label" for="defaultCheck2">
                          Wanita
                        </label>
                      </div>
                    </div>

                    <div class="mb-3">
                      <label for="validationDefault02" class="form-label"
                        >Kontak*</label
                      >
                      <input
                        type="number"
                        class="form-control"
                        style="width: 100%"
                        id="contactInput"
                        th:field="*{contact}"
                        required
                      />
                      <div
                        id="contactError"
                        class="text-danger"
                        style="display: none"
                      ></div>
                    </div>

                    <div class="mb-3">
                      <label for="validationDefault04" class="form-label"
                        >Admin Role*</label
                      >
                      <select
                        class="form-control form-select"
                        id="validationDefault04"
                        style="width: 100%"
                        name="adminRole"
                        required
                      >
                        <option selected disabled value="">
                          --Pilih Role Admin--
                        </option>
                        <option value="PROGRAM">Program</option>
                        <option value="FINANCE">Finance</option>
                      </select>
                    </div>

                    <div class="text-center">
                      <button
                        class="btn btn-danger"
                        type="button"
                        onclick="window.location.href='/pengguna'"
                      >
                        Batal
                      </button>

                      <button class="btn btn-primary" type="submit">
                        Simpan
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const contactInput = document.getElementById("contactInput");
      const contactError = document.getElementById("contactError");

      contactInput.addEventListener("input", () => {
        const contact = contactInput.value.trim(); // Menghapus spasi di awal dan akhir
        const startsWith08 = /^08/.test(contact);
        const isValidLength = contact.length >= 10 && contact.length <= 13;

        if (!startsWith08 && contact.length > 0) {
          // Jika nomor tidak diawali dengan "08" dan tidak kosong
          contactError.style.display = "block";
          contactError.textContent = 'Nomor telepon harus diawali dengan "08".';
        } else if (!isValidLength && startsWith08) {
          // Jika nomor diawali dengan "08" tetapi tidak memenuhi panjang yang valid
          contactError.style.display = "block";
          contactError.textContent =
            "Nomor telepon harus terdiri dari 10-13 digit.";
        } else {
          // Jika nomor telepon memenuhi kriteria
          contactError.style.display = "none";
          contactError.textContent = "";
        }
      });
    </script>

    <script>
      const emailInput = document.getElementById("emailInput");
      const emailError = document.getElementById("email-error");

      emailInput.addEventListener("input", () => {
        const email = emailInput.value;
        const isValidEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

        if (!isValidEmail) {
          emailError.style.display = "block";
        } else {
          emailError.style.display = "none";
        }
      });
    </script>

    <script>
      const passwordInput = document.getElementById("password");
      const passwordError = document.getElementById("password-error");

      passwordInput.addEventListener("input", () => {
        const password = passwordInput.value;
        if (password.length < 8 || password.length > 20) {
          passwordError.style.display = "block";
          passwordError.textContent =
            "Password harus terdiri dari 8-20 karakter.";
        } else if (!/[a-zA-Z]/.test(password) || !/\d/.test(password)) {
          passwordError.style.display = "block";
          passwordError.textContent =
            "Password harus mengandung huruf dan angka.";
        } else if (/\s/.test(password) || /[^\w\s]/.test(password)) {
          passwordError.style.display = "block";
          passwordError.textContent =
            "Password tidak boleh mengandung spasi, karakter khusus, atau emoji.";
        } else {
          passwordError.style.display = "none";
        }
      });
    </script>

    <script>
      const togglePassword = document.querySelector("#togglePassword");
      const password = document.querySelector("#password");

      togglePassword.addEventListener("click", function () {
        // toggle the type attribute
        const type =
          password.getAttribute("type") === "password" ? "text" : "password";
        password.setAttribute("type", type);

        // toggle the icon
        this.classList.toggle("bx bx-show");
      });

      function validatePhoneNumber(input) {
        // Hapus karakter selain angka
        var phoneNumber = input.value.replace(/\D/g, "");

        // Pastikan awalan nomor telepon adalah "08"
        if (!phoneNumber.startsWith("08")) {
          input.setCustomValidity("Nomor telepon tidak valid harus diawali 08");
        } else {
          // Pastikan panjang nomor telepon antara 11 dan 13 digit
          if (phoneNumber.length < 11 || phoneNumber.length > 13) {
            input.setCustomValidity(
              "Nomor telepon tidak valid harus terdiri dari 10-13 digit"
            );
          } else {
            input.setCustomValidity("");
          }
        }
      }
      input.value = "0" + phoneNumber;
    </script>

    <!-- Sertakan referensi ke jQuery di sini -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Sertakan referensi ke DataTables JavaScript di sini -->
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>
    <!-- jquery -->
    <script src="assets/js/jquery-1.11.3.min.js"></script>
    <!-- bootstrap -->
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <!-- count down -->
    <script src="assets/js/jquery.countdown.js"></script>
    <!-- isotope -->
    <script src="assets/js/jquery.isotope-3.0.6.min.js"></script>
    <!-- waypoints -->
    <script src="assets/js/waypoints.js"></script>
    <!-- owl carousel -->
    <script src="assets/js/owl.carousel.min.js"></script>
    <!-- magnific popup -->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!-- mean menu -->
    <script src="assets/js/jquery.meanmenu.min.js"></script>
    <!-- sticker js -->
    <script src="assets/js/sticker.js"></script>
    <!-- main js -->
    <script src="assets/js/main.js"></script>
  </body>
</html>
